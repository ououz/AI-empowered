<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¸ªäººä¸­å¿ƒ - å¤§å­¦ç”ŸèŒä¸šç«äº‰åŠ›èµ‹èƒ½å¹³å°</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <a href="login.html" id="navLogin">ç™»å½•/æ³¨å†Œ</a>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: white;
      color: #333;
    }

    .navbar {
      height: 66px;
      position: fixed;
      width: 100%;
      top: 0;
      display: flex;
      /* ä¿æŒå¼¹æ€§å¸ƒå±€ */
      align-items: center;
      justify-content: space-between;
      /* å­å…ƒç´ ä¸¤ç«¯å¯¹é½ */
      padding: 0 20px;
      /* å¢åŠ å†…è¾¹è·é¿å…å†…å®¹è´´è¾¹ */
      background: white;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      z-index: 1002;
      box-sizing: border-box;
      /* ç¡®ä¿paddingä¸å½±å“æ€»å®½åº¦ */
    }


    /* æ»šåŠ¨æ—¶é˜´å½±æ•ˆæœ */
    .navbar.scrolled {
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .navbar>div:first-child {
      margin-right: auto;
      /* å°†æ ‡é¢˜æ¨åˆ°æœ€å·¦ä¾§ */
      padding-left: 60px;
      /* å¢åŠ å·¦ä¾§é—´è· */
    }

    .navbar a {
      color: rgb(110, 105, 105);
      text-decoration: none;
      margin: 0 1rem;
    }


    .profile-container {
      max-width: 90vw;
      /* åŸ 1000px â†’ æ”¹ä¸º 90vwï¼Œéšè§†å£ç¼©æ”¾ */
      margin: 1.25rem auto;
      /* åŸ 2rem â†’ 20pxï¼ˆ1.25remï¼‰ï¼Œæ›´ç´§å‡‘ */
      padding: 1.25rem;
      /* åŸ 2rem â†’ 1.25rem */
      background: white;
      border-radius: 0.5rem;
      /* åŸ 8px â†’ 0.5rem */
      margin-bottom: 0;
      /* æ–°å¢ï¼šé˜²æ­¢å†…å®¹æº¢å‡º */
      box-sizing: border-box;
    }



    /* å¤´åƒå®¹å™¨æ ·å¼ */
    .avatar-container {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      overflow: hidden;
      border: 2px solid #65a9ee;
      margin: 0 auto 15px;
    }

    #userAvatar {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .profile-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .profile-info {
      display: flex;
      justify-content: space-around;
    }

    .profile-info div {
      width: 30%;
      text-align: center;
    }

    .profile-link {
      order: 1;
      margin-left: 100px;
    }



    .btn-logout {
      order: 3;
      /* é€€å‡ºæŒ‰é’®ä¿æŒæœ€å */
    }

    .footer {
      background-color: #333;
      color: white;
      text-align: center;
      padding: 1rem;
      margin-top: 2rem;
    }


    .nav-item {
      display: block;
      padding: 12px 2px !important;
      margin: 8px 0;
      border-radius: 8px;
      color: rgb(110, 105, 105);
      text-decoration: none;
      transition: all 0.3s;
      white-space: nowrap
    }

    .nav-item:hover {
      background: #0073e610;
      transform: translateX(5px);
    }



    /* ä¿®æ­£ä¾§è¾¹æ æ ·å¼ */
    .sidebar {
      width: 310px;
      height: 100vh;
      position: fixed;
      top: 0;
      white-space: nowrap;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1003;
      background: white;
    }

    .sidebar-title {
      font-size: 1.2rem;
      color: #4d4c4c;
      /* å§‹ç»ˆæ˜¾ç¤ºå¹³å°æ ‡é¢˜ */
      display: block !important;
      /* åˆ é™¤è¿‡æ¸¡åŠ¨ç”» */
      transition: none !important;
    }

    .sidebar.active {
      left: 0;
      box-shadow: 4px 0 16px rgba(0, 0, 0, 0.2);
    }

    .sidebar.active+.navbar {
      transform: translateX(280px);
    }


    .sidebar-close {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
    }


    /* æ–°å¢åŠ¨ç”»ç›¸å…³æ ·å¼ */
    .layout-container {
      display: flex;
      min-height: 100vh;
      margin-top: 3.75rem;
    }

    .navbar .sidebar-toggle {
      display: block !important;
    }

    /* æ·»åŠ é®ç½©å±‚æ ·å¼ */
    .sidebar-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1001;
      display: none;
    }

    /* ä¸»å†…å®¹åŒºï¼ˆå¼¹æ€§æ …æ ¼ï¼Œéšè§†å£å®½åº¦ç¼©æ”¾ï¼‰ */
    .main-content {
      margin-top: 0;
      padding: 0.625rem;
      /* åŸ 10px â†’ 0.625rem */
      display: grid;
      /* æ …æ ¼æ¯”ä¾‹ï¼šä¸»å†…å®¹å  2frï¼Œå·¥å…·ç®±å  1frï¼ˆéšè§†å£ç¼©æ”¾ï¼‰ */
      grid-template-columns: 2fr 1fr;
      gap: 0.625rem;
      /* åŸ 10px â†’ 0.625rem */
      align-items: start;
      /* æ–°å¢ï¼šä¸»å†…å®¹åŒºæœ€å¤§å®½åº¦ï¼ˆé¿å…è¿‡å®½ï¼‰+ å±…ä¸­ */
      max-width: 100%;
      margin-right: 0;
      margin-left: calc(2rem + 1rem);
      /* ä¾§è¾¹æ å®½åº¦ + å·¦é—´è· */
    }

    /* æ–°å¢ä¾§è¾¹æ å›¾æ ‡æ ·å¼ */
    .sidebar-header {
      display: flex;
      align-items: center;
      padding: 1rem;
      border-bottom: 1px solid #eee;
    }

    .sidebar-toggle {
      height: 100%;
      padding: 0 rem;
      display: flex;
      align-items: center;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #313131;
      cursor: pointer;
      z-index: 1001;
    }

    .sidebar.compact {
      width: 60px;
      left: 0;

    }



    /* ä¿®å¤ç´§å‡‘æ¨¡å¼å›¾æ ‡æ˜¾ç¤º */
    .sidebar.compact .material-icons {
      margin: 0 auto;
      /* å›¾æ ‡å±…ä¸­ */
      display: block !important;
      transform: scale(1.2);
      /* æ”¾å¤§å›¾æ ‡ */
    }

    /* æ–°å¢ç²¾ç¡®æ§åˆ¶ */
    .sidebar.compact .nav-item span:not(.material-icons) {
      display: none !important;
    }


    /* å±•å¼€çŠ¶æ€ä¸‹çš„å›¾æ ‡å®šä½ */
    .sidebar:not(.compact) .material-icons {
      margin-right: 12px;
    }

    /* æ·»åŠ æ ‡é¢˜æ˜¾ç¤ºæ§åˆ¶ */
    .sidebar.compact .sidebar-title {
      display: none !important;
    }


    .toolbox-container {
      background: white;
      border-radius: 0.75rem;
      /* åŸ 12px â†’ 0.75rem */
      padding: 1.25rem;
      /* åŸ 20px â†’ 1.25rem */
      width: 100%;
      /* åŸ 300px â†’ æ”¹ä¸º 100%ï¼Œéšæ …æ ¼ç¼©æ”¾ */
      max-width: 22.5rem;
      /* æœ€å¤§å®½åº¦é™åˆ¶ï¼ˆ360px â†’ 22.5remï¼‰ï¼Œé¿å…è¿‡å®½ */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 5rem;
      margin-left: 20px;

      box-sizing: border-box;
    }

    .user-card {
      display: flex;
      gap: 15px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }

    .avatar-small {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      overflow: hidden;
    }

    .avatar-small img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .user-meta h3 {
      margin: 5px 0;
      font-size: 16px;
    }

    .user-meta p {
      color: #666;
      font-size: 12px;
      margin: 0;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
      margin-top: 10px;
      font-size: 12px;
      color: #666;
    }

    .toolbox-nav {
      display: flex;
      gap: 10px;
      margin: 20px 0;
    }

    .tool-item {
      flex: 1;
      padding: 10px;
      border: 1px solid #eee;
      border-radius: 8px;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .tool-item .material-icons {
      margin-right: 0;
    }

    .tool-item.active {
      border-color: #3a8fff;
      background: #f5f9ff;
      color: #3a8fff;
    }

    .toolbox-section {
      margin: 25px 0;
    }

    .toolbox-section .material-icons {
      margin-right: 0;
    }

    .toolbox-section h4 {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 15px;
      color: #333;
      margin: 0 0 15px 0;
    }

    .tool-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .tool-card {
      padding: 15px;
      border: 1px solid #eee;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }

    .tool-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(58, 143, 255, 0.1);
    }

    .tool-card span:first-child {
      font-size: 24px;
      display: block;
      margin-bottom: 8px;
      color: #666;
    }

    .tool-card span:last-child {
      font-size: 12px;
      color: #666;
    }

    .ai-tools .tool-card {
      background: #f8fafd;
      border-color: #e3f2fd;
    }

    .btn-action {
      background: #ff9100;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 20px;
      display: flex;
      align-items: center;
      gap: 5px;
      margin: 0 auto;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-action:hover {
      background: #ff7700;
    }

    /* æ–°å¢åŠŸèƒ½æ ·å¼ */
    .form-modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
      z-index: 1003;
      width: 90%;
      max-width: 600px;
    }

    .form-group {
      margin-bottom: 1rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: #666;
    }

    .progress-section {
      padding: 1rem;
      background: #f8f9fa;
      border-radius: 8px;
      margin-bottom: 1rem;
      cursor: pointer;
    }

    .progress-section:hover {
      transform: translateX(5px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    .file-upload {
      border: 2px dashed #ddd;
      padding: 1rem;
      text-align: center;
      margin: 1rem 0;
    }

    .tab-container {
      display: flex;
      margin-bottom: 1rem;
      border-bottom: 2px solid #eee;
    }

    .tab-item {
      padding: 0.8rem 1.5rem;
      cursor: pointer;
      border-bottom: 3px solid transparent;
    }

    .tab-item.active {
      border-color: #0073e6;
      color: #0073e6;
    }

    /* ç™»å½•æç¤ºå®¹å™¨ */
    .login-prompt {
      text-align: center;
      padding: 40px 20px;
      background: #f8f9fa;
      border-radius: 12px;
      margin: 30px auto;
      max-width: 500px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }

    /* æ³¨å†Œé“¾æ¥ç¾åŒ– */
    .auth-actions {
      margin-top: 25px;
      font-size: 14px;
      color: #666;
    }

    .register-link {
      color: #0073e6;
      text-decoration: none;
      position: relative;
      padding: 0 5px;
      transition: color 0.3s;
    }

    .register-link::after {
      content: "";
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 0;
      height: 2px;
      background: #0073e6;
      transition: width 0.3s;
    }

    .register-link:hover {
      color: #0056b3;
    }

    .register-link:hover::after {
      width: 100%;
    }

    /* åˆ†éš”çº¿ç¾åŒ– */
    .auth-divider {
      display: flex;
      align-items: center;
      margin: 25px 0;
      color: #999;
    }

    .auth-divider::before,
    .auth-divider::after {
      content: "";
      flex: 1;
      height: 1px;
      background: #ddd;
    }

    .auth-divider span {
      padding: 0 12px;
    }

    /* æ–°å¢è¿‡æ¸¡åŠ¨ç”» */
    .function-container {
      opacity: 1;
      transform: translateY(0);
      transition: all 0.4s ease;
      width: 100%;
      /* åŸ 900px â†’ æ”¹ä¸º 100%ï¼Œéšçˆ¶å®¹å™¨ç¼©æ”¾ */
      margin-left: 0;
      /* ç§»é™¤å›ºå®šå·¦é—´è·ï¼Œéšä¸»å†…å®¹åŒºå±…ä¸­ */
      /* æ–°å¢ï¼šåŠŸèƒ½å®¹å™¨å†…è¾¹è·ï¼ˆé¿å…å†…å®¹è´´è¾¹ï¼‰ */
      padding: 0 0.5rem;
    }

    .function-container.hidden {
      opacity: 0;
      transform: translateY(20px);
      pointer-events: none;
      height: 0;
      overflow: hidden;
    }

    /* æ›´æ–°ç™»å½•æç¤ºæ ·å¼ */
    .login-prompt {
      transition: all 0.4s ease 0.1s;
    }

    /* æ–°å¢ç”¨æˆ·æ§åˆ¶æŒ‰é’® */
    .user-controls {
      display: flex;
      align-items: center;
      gap: 15px;
      white-space: nowrap;
      /* é¿å…å†…å®¹æ¢è¡Œ */
    }

    .material-icons {
      margin-right: -40px;
    }

    /* ç™»å½•æŒ‰é’®ç¾åŒ– */
    .btn-login {
      background: transparent;
      border: 1px solid #0073e6;
      color: #0073e6;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;

    }

    .btn-login:hover::before {
      left: 100%;
    }

    .btn-login:hover {
      background: #0073e610;
    }

    .btn-login:active {
      transform: translateY(0);
      box-shadow: 0 4px 8px rgba(0, 115, 230, 0.3);
    }

    .btn-logout {
      background: transparent;
      border: 1px solid #0073e6;
      color: #0073e6;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      margin-left: 50px;
      margin-right: 40px;
    }


    .btn-logout:hover {
      background: #0073e610;
    }


    /* æ–°å¢ Material Icons æ ·å¼ */
    .material-icons {
      vertical-align: middle;
      font-size: 1.5rem;
      color: inherit;
    }


    .search-container {
      position: relative;
      margin-right: 0;
      /* ç§»é™¤å›ºå®šå³è¾¹è· */
      width: 100%;
      /* å æ»¡çˆ¶å®¹å™¨å®½åº¦ */
      max-width: 800px;
      /* ä¿ç•™æœ€å¤§å®½åº¦é™åˆ¶ */
      background: #f8f9fa;
      border-radius: 25px;
      padding: 8px 1%;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      display: flex;
      align-items: center;
      box-sizing: border-box;
    }

    .search-input:focus {
      outline: none;
      box-shadow: none;
    }

    .search-input {
      border: none;
      background: transparent;
      width: 100%;
      padding: 0 10px;
      font-size: 14px;
    }

    .search-icon {
      color: #666;
      right: 15px;
      font-size: 20px;
      display: flex;
      align-items: center;
      margin-left: 10px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 0 10px;
      display: flex;
      align-items: center;
    }

    .search-container:focus-within::after {
      opacity: 1;
    }

    /* + è°ƒæ•´ä¸ªäººä¸­å¿ƒä½ç½® */
    .nav-dynamic {
      position: static;
      transform: none;
      flex: 1;
      margin: 0 20px;
      min-width: 200px;
      display: flex;
      align-items: center;
      gap: 15vw;
      /* éšé¡µé¢ç¼©æ”¾çš„é—´è· */
    }

    /* æ–°å¢æ ·å¼ */
    .competency-section {
      background: #cfdbea;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 20px;
    }

    .competency-header h3 {
      color: #000000;
      margin-bottom: 5px;
    }

    .competency-header p {
      color: #000000;
      font-size: 14px;
      margin-bottom: 15px;
    }

    .progress-bar-container {
      background: #ffffff;
      height: 8px;
      border-radius: 4px;
      margin-bottom: 5px;
    }

    .progress-bar {
      background: #f3d782;
      /* é»„è‰²è¿›åº¦æ¡ */
      height: 100%;
      border-radius: 4px;
      transition: width 0.3s;
    }

    .progress-text {
      font-size: 14px;
      color: #666;
      margin-bottom: 15px;
    }

    .favorite-item {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      transition: all 0.3s;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .favorite-item:hover {

      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
    }

    .favorite-content {
      flex: 1;
      padding-right: 20px;
    }

    .favorite-item h4 {
      color: #2c3e50;
      margin: 0 0 6px;
      font-size: 16px;
    }

    .favorite-item p {
      color: #666;
      font-size: 14px;
      margin: 0;
    }

    .favorite-item button {
      background: none;
      border: 1px solid #ff6b6b;
      color: #ff6b6b;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
      white-space: nowrap;
    }

    .favorite-item button:hover {
      background: #ff6b6b15;
    }

    /* æŠ¥å‘Šé¡¹ç›®æ ·å¼ */
    .report-item {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      transition: all 0.3s;
    }

    .report-item:hover {

      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
    }

    .report-item h4 {
      color: #2c3e50;
      margin: 0 0 8px;
      font-size: 16px;
    }

    .report-item p {
      color: #666;
      font-size: 14px;
      margin: 0 0 12px;
    }

    .report-item button {
      background: #9bc8df;
      color: white;
      border: none;
      padding: 8px 20px;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .report-item button:hover {
      background: #67b6de;
    }

    /* çŠ¶æ€æ ‡ç­¾ç¾åŒ– */
    .status {
      display: inline-flex;
      align-items: center;
      font-size: 14px;
      padding: 4px 8px;
      border-radius: 16px;
      margin-left: 8px;
    }

    #basicStatus:not(:empty),
    #skillsStatus:not(:empty),
    #educationStatus:not(:empty),
    #workStatus:not(:empty) {
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 12px;
    }

    /* å·²å®ŒæˆçŠ¶æ€ */
    [id$="Status"]:contains("å·²å®Œæˆ") {
      background: #4CAF5020;
      color: #45a049;
      border: 1px solid #4CAF5040;
    }

    /* å¾…å®Œå–„/å¾…å½•å…¥çŠ¶æ€ */
    [id$="Status"]:contains("å¾…") {
      background: #ff980020;
      color: #ff9800;
      border: 1px solid #ff980040;
    }

    .form-modal {
      max-width: 800px;
      margin: 2rem auto;
      padding: 2.5rem;
      background: white;
      border-radius: 16px;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    }

    .form-modal h2 {
      font-size: 1.8rem;
      color: #1a1a1a;
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid #f0f3f7;
    }

    /* è¡¨å•ç»„æ ·å¼ */
    .form-group {
      margin-bottom: 1.5rem;
      position: relative;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.6rem;
      font-weight: 500;
      color: #2d3748;
      font-size: 0.95rem;
    }

    .search-container .search-input {
      border: none;
      background: transparent;
      width: 100%;
      padding: 0 10px;
      font-size: 14px;
    }

    /* è¾“å…¥æ§ä»¶æ ·å¼ */
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    select,
    textarea {
      width: 90%;
      padding: 0.8rem 1.2rem;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: #f8fafc;
    }

    input:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: #0073e6;
      box-shadow: 0 0 0 3px rgba(0, 115, 230, 0.1);
      background: white;
    }

    /* æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ */
    .file-upload {
      border: 2px dashed #cbd5e0;
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      margin: 1.5rem 0;
      transition: all 0.3s;
      background: #f8fafc;
    }

    .file-upload.dragover {
      border-color: #0073e6;
      background: rgba(0, 115, 230, 0.05);
    }

    .file-upload p {
      color: #718096;
      margin: 1rem 0 0;
      font-size: 0.95rem;
    }

    .file-upload input[type="file"] {
      opacity: 0;
      position: absolute;
      width: 1px;
      height: 1px;
    }

    /* æŒ‰é’®ç»„æ ·å¼ */
    .form-actions {
      margin-top: 2rem;
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
    }

    button[type="submit"] {
      background: #94bee9;
      color: white;
      padding: 0.8rem 2rem;
      border: none;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
    }

    button[type="button"] {
      background: #f0f4f8;
      color: #4a5568;
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
    }



    /* æ—¶é—´è¾“å…¥ç»„ */
    .date-group {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    /* ä¸Šä¼ é¢„è§ˆ */
    .upload-preview {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }

    .preview-item {
      background: #f8fafc;
      padding: 0.8rem;
      border-radius: 6px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }


    /* è¡¨å•éªŒè¯æç¤º */
    .error-message {
      color: #e53e3e;
      font-size: 0.85rem;
      margin-top: 0.5rem;
      display: none;
    }

    input:invalid {
      border-color: #e53e3e;
    }

    input:invalid+.error-message {
      display: block;
    }

    .education-form {
      position: relative;
      background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
    }

    .form-group .material-icons {
      margin-right: 5px;
    }

    .form-actions .material-icons {
      margin-right: 5px;
    }

    .degree-select {
      position: relative;
    }

    .degree-select::after {
      content: "ğŸ“";
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
    }

    .time-inputs {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 1.5rem;
    }

    .academic-achievement {
      margin-top: 1.5rem;
      border-top: 2px dashed #e2e8f0;
      padding-top: 1.5rem;
    }

    /* ç»Ÿä¸€å›¾æ ‡æ ·å¼ï¼Œé¿å…åç§» */
    .profile-link .material-icons {
      margin-right: 0;
      /* æ¸…é™¤å…¨å±€ .material-icons çš„è´Ÿè¾¹è·ï¼ˆåŸä»£ç æœ‰ margin-right: -40pxï¼Œä¼šå¯¼è‡´å›¾æ ‡åç§»ï¼‰ */
      /*font-size: 1.5rem; /* å¯é€‰ï¼šè°ƒæ•´å›¾æ ‡å¤§å°ï¼Œä¸å¯¼èˆªæ æ¯”ä¾‹åŒ¹é… */
    }

    .search-icon .material-icons {
      margin-right: 0;
      /* æ¸…é™¤å…¨å±€ .material-icons çš„è´Ÿè¾¹è·ï¼ˆåŸä»£ç æœ‰ margin-right: -40pxï¼Œä¼šå¯¼è‡´å›¾æ ‡åç§»ï¼‰ */
      /*font-size: 1.5rem; /* å¯é€‰ï¼šè°ƒæ•´å›¾æ ‡å¤§å°ï¼Œä¸å¯¼èˆªæ æ¯”ä¾‹åŒ¹é… */
    }

    .post-login {
      display: flex;
      align-items: center;
      justify-content: center;
      min-width: 30px;
      /* æœ€å°å®½åº¦ï¼Œé¿å…å›¾æ ‡è¢«æŒ¤å‹ */
      min-height: 30px;
      /* æœ€å°é«˜åº¦ï¼Œç¡®ä¿ç‚¹å‡»åŒºåŸŸ */
    }

    .settings .material-icons {
      margin-right: auto;
      font-size: 12px;
      vertical-align: middle;

    }

    .settings .material-icons:hover {
      color: #0073e6;
      cursor: pointer;
    }

    /* ç»Ÿä¸€ä¿å­˜/å–æ¶ˆæŒ‰é’®æ ·å¼ */
    .save-button {
      background: #94bee9;
      color: white;
      padding: 0.8rem 2rem;
      border: none;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
    }

    .save-button:hover {
      background: #6aa5db;
    }

    .cancel-button {
      background: #f0f4f8;
      color: #4a5568;
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .cancel-button:hover {
      background: #e2e8f0;
    }

    .toolbox-toggle {
      display: none;
      background: transparent;
      border: none;
      font-size: 28px;
      cursor: pointer;
      margin-left: 10px;
    }

    #functionContainer,
    #toolboxContainer {
      display: block;
    }

    @media (max-width: 768px) {


      .sidebar.active {
        height: auto;
        max-height: 80vh;
        overflow-y: auto;
      }

      .sidebar.compact {
        width: 60px;
        height: auto;
      }

      .search-container {
        display: none;
      }


      .profile-link .material-icons {
        display: none;
      }

      .navbar>div:first-child {
        display: none;
      }

      .material-icons {
        font-size: 1.2rem;
      }

      .sidebar .nav-item {
        display: none;
        padding: 15px 20px !important;
        border-bottom: 1px solid #f0f0f0;
        align-items: center;
      }


      .sidebar.active .nav-item {
        display: flex !important;

      }

      .sidebar .nav-item span:not(.material-icons) {
        display: inline-block !important;
        margin-left: 15px;
      }

      .sidebar .material-icons {
        margin-right: 0;
        font-size: 24px;
      }



      .sidebar.compact .material-icons {
        margin: 0;
        transform: none;
      }


      .navbar .sidebar-toggle {
        display: flex !important;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        font-size: 1.5rem;
        color: #313131;
        cursor: pointer;
      }


      /* éšè—æ¬¢è¿æ–‡å­— */
      .welcome-text {}

      /* é®ç½©å±‚ */
      .sidebar-overlay {
        display: none;
      }

      .sidebar.active~.sidebar-overlay {
        display: block;
      }

      .navbar {
        padding: 0 10px;
        justify-content: flex-start;
        gap: 8px;
      }

      .welcome-text {
        margin-left: 50%;
      }

      .user-container {
        margin-top: 18px;
      }

      .nav-dynamic {
        gap: 0.5rem;
        margin: 0 0.3125rem;
        min-width: auto;
        flex: none;
      }

      .tab-container {
        gap: 10px;
        display: flex;
      }



      /* ç§»åŠ¨ç«¯ä¸»å†…å®¹åŒºåŸŸé€‚é… */
      .main-content {
        margin-top: 0;
        margin-left: 0;
        padding: 10px;
        grid-template-columns: 1fr;
        /* ç§»é™¤å³ä¾§è¾¹æ  */
        display: flex;
        flex-direction: column;
      }

      /* åŠŸèƒ½å®¹å™¨é€‚é… */
      .function-container {
        width: 100%;
        margin-left: 0;
      }

      .toolbox-toggle {
        display: block;
      }

      /* å·¥å…·ç®±å®¹å™¨éšè— */
      .toolbox-container {
        display: none;
        /* ç§»åŠ¨ç«¯éšè—å·¥å…·ç®± */
      }

      /* ä¸ªäººèµ„æ–™å®¹å™¨é€‚é… */
      .profile-container {
        padding: 1rem;
        padding-bottom: 0;
        margin: 1rem auto;
        margin-bottom: 0;
      }

      /* é€‰é¡¹å¡é€‚é… */
      .tab-container {

        gap: 10px;
      }

      .tab-item {
        padding: 10px;
        text-align: center;
      }

      /* ç«äº‰åŠ›åŒºåŸŸé€‚é… */
      .competency-section {
        padding: 10px;
        text-align: center;
        font-size: 0.8rem;
        margin-bottom: 15px;
      }

      /* è¿›åº¦åŒºåŸŸé€‚é… */
      .progress-section {
        padding: 0.8rem;
        margin-bottom: 0.8rem;
      }

      /* è¡¨å•æ¨¡æ€æ¡†é€‚é… */
      .form-modal {
        width: 95%;
        padding: 1.5rem;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      /* ç™»å½•æç¤ºåŒºåŸŸé€‚é… */
      .login-prompt {
        padding: 20px 15px;
        margin: 20px auto;
      }

      /* ç”¨æˆ·ä¿¡æ¯åŒºåŸŸé€‚é… */
      .user-container {
        text-align: center;
      }

      .stats-grid {
        grid-template-columns: repeat(3, 1fr);
        /* æ”¹ä¸º3åˆ—å¸ƒå±€ */
        gap: 5px;
        font-size: 11px;
      }

      /* æŒ‰é’®é€‚é… */
      .btn-login,
      .btn-logout {
        padding: 6px 12px;
        font-size: 0.9rem;
        margin: 5px;
      }

      /* æœç´¢æ¡†é€‚é… */
      .search-container {
        max-width: 120px;
        padding: 5px 8px;
      }

      .search-input {
        font-size: 12px;
        padding: 0 5px;
      }

      .toolbox-container {
        display: block;
        /* æ¢å¤æ˜¾ç¤º */
        width: 100%;
        margin: 1rem auto;
        position: static;
        order: 2;
        /* ç¡®ä¿åœ¨profile-headeråé¢ */
      }

      .function-container {
        order: 1;
      }

      .toolbox-toggle {
        font-size: 11px;
        color: inherit;
      }

      .toolbox-toggle .material-icons {
        margin-right: auto;
        font-size: 12px;
        vertical-align: middle;
        color: inherit;
      }

      #functionContainer {
        display: block;
      }

      #toolboxContainer {
        display: none;
      }
    }
  </style>
</head>

<body onload="checkLoginStatus()">
  <div class="navbar">
    <div>å¤§å­¦ç”ŸèŒä¸šç«äº‰åŠ›èµ‹èƒ½å¹³å°</div>
    <div class="nav-dynamic" id="navDynamic">
      <div class="search-container">
        <input type="text" id="searchInput" placeholder="æœç´¢" class="search-input">
        <button class="search-icon" onclick="handleSearch()">
          <span class="material-icons">search</span>
        </button>
      </div>
      <div class="post-login" id="postLogin">
        <a href="profile.html" class="profile-link">
          <span class="material-icons">person</span>
        </a>
      </div>
    </div>
    <div class="user-controls" id="navAuth"></div>
    <div class="sidebar compact">
      <div class="sidebar-header">
        <button class="sidebar-toggle" onclick="toggleSidebar()">â˜°</button>
        <div class="sidebar-title">èœå•</div>
      </div>
      <a href="index.html" class="nav-item">
        <span class="material-icons">home</span>
        <span>é¦–é¡µ</span>
      </a>

      <a href="courses.html" class="nav-item">
        <span class="material-icons" aria-hidden="true">menu_book</span>
        <span>è¯¾ç¨‹</span>
      </a>

      <a href="assessment.html" class="nav-item">
        <span class="material-icons" aria-hidden="true">assignment</span>
        <span>æµ‹è¯„</span>
      </a>

      <a href="career-library.html" class="nav-item">
        <span class="material-icons" aria-hidden="true">business_center</span>
        <span>èŒä¸šåº“</span>
      </a>

      <a href="community.html" class="nav-item">
        <span class="material-icons" aria-hidden="true">forum</span>
        <span>ç¤¾åŒº</span>
      </a>

      <a href="search.html" class="nav-item">
        <span class="material-icons" aria-hidden="true">search</span>
        <span>æœç´¢</span>
      </a>

      <a href="profile.html" class="nav-item">

        <span class="material-icons" aria-hidden="true">person</span>
        <span>ä¸ªäººä¸­å¿ƒ</span>
      </a>
    </div>
  </div>
  <div class="profile-container">

    <!-- ç™»å½•çŠ¶æ€ -->
    <div class="login-prompt" id="loginPrompt">

      <h2 style="margin-bottom: 1.5rem; color: #2c3e50;">æ¬¢è¿æ¥åˆ°èŒä¸šèµ‹èƒ½å¹³å°</h2>

      <button class="btn-login" onclick="window.location.href='login.html'">
        <span class="material-icons" style="margin-right: 8px;">login</span>
        ç«‹å³ç™»å½•
      </button>

      <div class="auth-divider">
        <span>è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ</span>
      </div>

      <div class="auth-actions">
        <button class="btn-login" onclick="window.location.href='login.html'">
          <span class="material-icons" style="font-size: 20px; margin-right: 8px;width:10px">arrow_forward</span>
          æ³¨å†Œæ–°è´¦å·
          </a>
      </div>
    </div>
    <!-- æ–°å¢user-container -->
    <div class="user-container" id="userContainer">
      <div class="profile-header">
        <div class="avatar-container">
          <img src="images/profile/actor.jpg" alt="ç”¨æˆ·å¤´åƒ" id="userAvatar">
        </div>
        <h2 id="userNickname">ç”¨æˆ·æ˜µç§°</h2>
        <div class="user-meta">

          <p>å­¦ç”Ÿ</p>
          <div class="stats-grid">
            <div>å¸–å­ </div>
            <div>è·èµ</div>
            <div>å­¦ä¹ æ—¶é•¿ </div>

            <div class="settings" onclick="openSettings()">
              <span class="material-icons">è®¾ç½® settings</span>
            </div>

            <button class="toolbox-toggle" onclick="toggleToolbox()">
              <span class="material-icons">å·¥å…·ç®± business_center </span>
            </button>

          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="main-content">
    <!-- åŠŸèƒ½å®¹å™¨ -->
    <div class="function-container" id="functionContainer">
      <!-- åŠŸèƒ½é€‰é¡¹å¡ -->
      <div class="tab-container">
        <div class="tab-item active" onclick="switchTab('profile')">èµ„æ–™å®Œå–„</div>
        <div class="tab-item" onclick="switchTab('favorites')">å²—ä½æ”¶è—</div>
        <div class="tab-item" onclick="switchTab('reports')">å†å²æŠ¥å‘Š</div>

      </div>

      <!-- èµ„æ–™å®Œå–„éƒ¨åˆ† -->
      <div id="profileTab">

        <!-- ä¿®æ”¹åçš„ç«äº‰åŠ›å±•ç¤ºåŒºåŸŸ -->
        <div class="competency-section">
          <div class="competency-header">
            <h3>ç«äº‰åŠ›è¶…è¿‡<span id="competencyPercent">0</span>%äººæ‰</h3>
            <p>å®Œå–„èµ„æ–™ï¼Œå²—ä½æ¨èæ›´ä¼˜å…ˆï¼</p>
          </div>

          <div class="progress-bar-container">
            <div class="progress-bar" id="competencyProgress" style="width: 10%"></div>
          </div>
          <div class="progress-text">å¿«é€Ÿæ ¡å‡†ç«äº‰åŠ› <span id="progressPercent">10%</span></div>

        </div>

        <div class="progress-section" onclick="showForm('basic')">
          <h3>åŸºç¡€èµ„æ–™ <span class="status" id="basicStatus"></span></h3>
          <p>ç‚¹å‡»å®Œå–„ä¸ªäººä¿¡æ¯</p>
        </div>

        <div class="progress-section" onclick="showForm('skills')">
          <h3>ä¸ªäººæŠ€èƒ½ <span class="status" id="skillsStatus"></span></h3>
          <p>ç‚¹å‡»æ·»åŠ æŠ€èƒ½è¯ä¹¦</p>
        </div>

        <div class="progress-section" onclick="showForm('education')">
          <h3>æ•™è‚²ç»å† <span class="status" id="educationStatus"></span></h3>
          <p>ç‚¹å‡»å®Œå–„æ•™è‚²èƒŒæ™¯</p>
        </div>

        <div class="progress-section" onclick="showForm('work')">
          <h3>å·¥ä½œç»å† <span class="status" id="workStatus"></span></h3>
          <p>ç‚¹å‡»å®Œå–„å·¥ä½œç»å†</p>
        </div>




      </div>

      <!-- å²—ä½æ”¶è— -->
      <div id="favoritesTab" style="display: none;">
        <div id="favoriteJobsContainer">
          <!-- åŠ¨æ€ç”Ÿæˆæ”¶è—å†…å®¹ -->
        </div>
      </div>

      <!-- æµ‹è¯„æŠ¥å‘Š -->
      <div id="reportsTab" style="display: none;">
        <div class="report-item">
          <h4>2025èŒä¸šç«äº‰åŠ›æµ‹è¯„</h4>
          <p>å®Œæˆæ—¶é—´ï¼š2025-08-20</p>
          <button onclick="viewReport()">æŸ¥çœ‹æŠ¥å‘Š</button>
        </div>
      </div>


      <!-- æ–°å¢èµ„æ–™è¡¨å• -->
      <div id="basicForm" class="form-modal">
        <h2>åŸºæœ¬ä¿¡æ¯</h2>
        <form onsubmit="event.preventDefault(); saveForm(event, 'basic')">
          <div class="form-group">
            <label>å§“å <span class="required">*</span></label>
            <input type="text" id="realName" name="name" required>
            <div class="error-message">è¯·è¾“å…¥æ‚¨çš„å§“å</div>
          </div>

          <div class="form-group">
            <label>æ€§åˆ« <span class="required">*</span></label>
            <div class="radio-group">
              <label class="radio-item">
                <input type="radio" name="gender" value="male" required>
                <span class="radio-check"></span>
                ç”·æ€§
              </label>
              <label class="radio-item">
                <input type="radio" name="gender" value="female">
                <span class="radio-check"></span>
                å¥³æ€§
              </label>
            </div>
          </div>

          <div class="form-group">
            <label>è”ç³»æ–¹å¼ <span class="required">*</span></label>
            <input type="text" id="contact" placeholder="è¯·è¾“å…¥è”ç³»æ–¹å¼">
            <div class="error-message">è¯·è¾“å…¥æ‚¨çš„è”ç³»æ–¹å¼</div>
          </div>

          <div class="form-group">
            <label>è‡ªæˆ‘ä»‹ç» <span class="required">*</span></label>
            <textarea id="bio" rows="4" placeholder="ä»‹ç»ä¸€ä¸‹è‡ªå·±..."></textarea>
            <div class="error-message">è¯·è¾“å…¥æ‚¨çš„è‡ªæˆ‘ä»‹ç»</div>
          </div>
          <!-- è¡¨å•æ“ä½œ -->
          <div class="form-actions">
            <button type="submit" class="save-button">
              <span class="material-icons">save</span>
              ä¿å­˜ä¸ªäººèµ„æ–™
            </button>
            <button type="button" class="cancel-button" onclick="closeModal()">
              <span class="material-icons">cancel</span>
              å–æ¶ˆ
            </button>
          </div>
        </form>
      </div>

      <!-- æ–°å¢æ–‡ä»¶ä¸Šä¼ è¡¨å• -->
      <div id="skillsForm" class="form-modal">
        <h2>ğŸ“¤ è¯ä¹¦ä¸Šä¼ </h2>
        <form onsubmit="saveForm(event, 'skills')">

          <!-- æŠ€èƒ½è¾“å…¥æ¡† -->
          <div class="form-group">
            <label for="skills">æŠ€èƒ½æ ‡ç­¾ <span class="required">*</span></label>
            <input type="text" id="skills" placeholder="ä¾‹å¦‚ï¼šJava, Python, SQL">
            <small>å¤šä¸ªæŠ€èƒ½ç”¨é€—å·åˆ†éš”</small>
          </div>

          <!-- æ–‡ä»¶ä¸Šä¼  -->
          <div class="file-upload" ondragover="handleDragOver(event)" ondrop="handleDrop(event)">
            <div class="upload-icon">ğŸ“</div>
            <input type="file" accept=".pdf,.jpg,.png" multiple>
            <p>æ‹–æ”¾æ–‡ä»¶æˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶<br><span>æ”¯æŒPDFã€JPGã€PNGæ ¼å¼ï¼ˆæœ€å¤§50MBï¼‰</span></p>
            <div class="upload-preview" id="previewContainer"></div>
          </div>

          <!-- è¡¨å•æ“ä½œ -->
          <div class="form-actions">
            <button type="submit" class="save-button">
              <span class="material-icons">save</span>
              ä¿å­˜
            </button>
            <button type="button" class="cancel-button" onclick="closeModal()">
              <span class="material-icons">cancel</span>
              å–æ¶ˆ
            </button>
          </div>
        </form>
      </div>

      <!-- å·¥ä½œç»å†ä¸Šä¼ è¡¨å• -->
      <div id="workForm" class="form-modal">
        <h2>ğŸ’¼ å·¥ä½œç»å†</h2>
        <form onsubmit="saveForm(event, 'work')">
          <div class="form-group">
            <label>å…¬å¸åç§° <span class="required">*</span></label>
            <input type="text" id="companyName" class="exp-company" required>
          </div>

          <div class="date-group">
            <div class="form-group">
              <label>å…¥èŒæ—¶é—´ <span class="required">*</span></label>
              <input type="date" id="workStartDate" class="exp-start" required>
            </div>
            <div class="form-group">
              <label>ç¦»èŒæ—¶é—´</label>
              <input type="date" id="workEndDate" class="exp-end">
            </div>
          </div>

          <div class="form-group">
            <label>å·¥ä½œå†…å®¹ <span class="required">*</span></label>
            <textarea rows="4" id="workDescription" class="exp-position" placeholder="æè¿°ä¸»è¦å·¥ä½œèŒè´£å’Œæˆå°±..."
              required></textarea>
          </div>

          <!-- è¡¨å•æ“ä½œ -->
          <div class="form-actions">
            <button type="submit" class="save-button">
              <span class="material-icons">save</span>
              ä¿å­˜å·¥ä½œç»å†
            </button>
            <button type="button" class="cancel-button" onclick="closeModal()">
              <span class="material-icons">cancel</span>
              å–æ¶ˆ
            </button>
          </div>
        </form>
      </div>

      <!-- æ•™è‚²ç»å†ä¸Šä¼ è¡¨å• -->
      <div id="educationForm" class="form-modal education-form">
        <h2>ğŸ“ æ•™è‚²èƒŒæ™¯</h2>
        <form onsubmit="saveForm(event, 'education')">
          <!-- å­¦æ ¡ä¿¡æ¯ -->
          <div class="form-group">
            <label for="schoolName">
              <span class="material-icons">school</span>
              å­¦æ ¡åç§°
              <span class="required">*</span>
            </label>
            <input type="text" id="schoolName" class="edu-school" placeholder="è¾“å…¥å®Œæ•´å­¦æ ¡åç§°" required
              data-autocomplete="schools">
            <div class="autocomplete-dropdown"></div>
          </div>

          <!-- å­¦å†ä¸ä¸“ä¸š -->
          <div class="form-row">
            <div class="form-group degree-select">
              <label for="degree">
                <span class="material-icons">library_books</span>
                å­¦å†
                <span class="required">*</span>
              </label>
              <select id="degree" class="edu-degree" required>
                <option value="">è¯·é€‰æ‹©æœ€é«˜å­¦å†</option>
                <option value="é«˜ä¸­">é«˜ä¸­</option>
                <option value="å¤§ä¸“">å¤§ä¸“</option>
                <option value="æœ¬ç§‘">æœ¬ç§‘</option>
                <option value="ç¡•å£«">ç¡•å£«</option>
                <option value="åšå£«">åšå£«</option>
              </select>
            </div>

            <div class="form-group">
              <label for="major">
                <span class="material-icons">psychology</span>
                ä¸“ä¸š
                <span class="required">*</span>
              </label>
              <input type="text" id="major" placeholder="è¾“å…¥å®Œæ•´ä¸“ä¸šåç§°" required data-autocomplete="majors">
            </div>
          </div>

          <!-- å°±è¯»æ—¶é—´ -->
          <div class="time-inputs">
            <div class="form-group">
              <label>å…¥å­¦æ—¶é—´</label>
              <div class="date-picker">
                <input type="month" id="startDate" class="edu-start" required min="2000-01" max="2030-12">
              </div>
            </div>

            <div class="form-group">
              <label>æ¯•ä¸šæ—¶é—´</label>
              <div class="date-picker">
                <input type="month" id="endDate" class="edu-end" required min="2000-01" max="2030-12">
              </div>
            </div>
          </div>

          <!-- å­¦æœ¯æˆå°± -->
          <div class="academic-achievement">
            <h3>ğŸ† å­¦æœ¯æˆæœ</h3>
            <div class="form-group">
              <label>ç›¸å…³è¯ä¹¦</label>
              <div class="file-upload cert-upload">
                <input type="file" accept=".pdf,.jpg,.png" multiple data-max-size="50MB">
                <p>æ‹–æ”¾æ–‡ä»¶æˆ–ç‚¹å‡»ä¸Šä¼ <br>
                  <small>æ”¯æŒæ¯•ä¸šè¯ä¹¦ã€æˆç»©å•ã€è·å¥–è¯æ˜ç­‰</small>
                </p>
                <div class="upload-preview"></div>
              </div>
            </div>
          </div>

          <!-- è¡¨å•æ“ä½œ -->
          <div class="form-actions">
            <button type="submit" class="save-button">
              <span class="material-icons">save</span>
              ä¿å­˜æ•™è‚²ç»å†
            </button>
            <button type="button" class="cancel-button" onclick="closeModal()">
              <span class="material-icons">cancel</span>
              å–æ¶ˆ
            </button>
          </div>
        </form>
      </div>


    </div>
    <div class="toolbox-container" id="toolboxContainer">
      <!-- å·¥å…·ç®±å¯¼èˆª -->
      <div class="toolbox-nav">
        <button class="tool-item active">
          <span class="material-icons">apps</span>å…¨éƒ¨
        </button>
        <button class="tool-item">
          <span class="material-icons">book</span>è®¤è¯è¯¾ç¨‹(5)
        </button>
      </div>

      <!-- å·¥å…·åˆ†ç±» -->
      <div class="toolbox-section">
        <h4><span class="material-icons">forum</span>è®¨è®ºä¸“åŒº</h4>
        <div class="tool-grid">
          <div class="tool-card">
            <span class="material-icons">article</span>
            <span>æˆ‘çš„æ–‡ç« </span>
          </div>
          <div class="tool-card">
            <span class="material-icons">assignment</span>
            <span>å­¦ä¹ è®¡åˆ’</span>
          </div>
          <div class="tool-card">
            <span class="material-icons">verified</span>
            <span>æˆ‘çš„è¯ä¹¦(2)</span>
          </div>
        </div>
      </div>

      <!-- AIå·¥å…·åŒº -->
      <div class="toolbox-section ai-tools">
        <h4><span class="material-icons">smart_toy</span>AI ç³»åˆ—</h4>
        <div class="tool-grid">
          <div class="tool-card">
            <span class="material-icons">translate</span>
            <span>æ–‡æ¡£ç¿»è¯‘</span>
          </div>
          <div class="tool-card">
            <span class="material-icons">text_snippet</span>
            <span>OCRè¯†åˆ«</span>
          </div>
          <div class="tool-card">
            <span class="material-icons">live_help</span>
            <span>æ–‡æ¡£é—®ç­”</span>
          </div>
        </div>
      </div>

    </div>

  </div>
  </div>

  <!-- ä¿®æ”¹èµ„æ–™æ¨¡æ€æ¡†æ”¾è¿™é‡Œ -->
  <div id="settingsModal" class="form-modal" style="display:none;">
    <h3>ä¿®æ”¹èµ„æ–™</h3>
    <label>ç”¨æˆ·åï¼š</label>
    <input type="text" id="newUsername" placeholder="è¯·è¾“å…¥æ–°ç”¨æˆ·å"><br><br>
    <label>ä¸Šä¼ å¤´åƒï¼š</label>
    <input type="file" id="avatarFile" accept="image/*"><br><br>


    <!-- æŒ‰é’®ç»„é å³ -->
    <div class="form-actions">
      <button type="submit" onclick="updateProfile()" class="save-button">
        <span class="material-icons">save</span>
        ä¿å­˜
      </button>
      <button type="button" onclick="closeSettings()" class="cancel-button">
        <span class="material-icons">cancel</span>
        å–æ¶ˆ
      </button>
    </div>


  </div>


  <div class="footer">
    <p>&copy; 2023 å¤§å­¦ç”ŸèŒä¸šç«äº‰åŠ›èµ‹èƒ½å¹³å°. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
    <p>è”ç³»æˆ‘ä»¬: info@careerempower.com</p>
  </div>

</body>
<script>
  // ç”¨æˆ·æ•°æ®å­˜å‚¨
  let userData = {
    basic: {},
    skills: [],
    education: {},
    work: {},
    projects: [],
    certificates: []
  };

  // æ›´æ–°è¿›åº¦è®¡ç®—é€»è¾‘ï¼ˆä»…è®¡ç®—å®é™…å­˜åœ¨çš„éƒ¨åˆ†ï¼‰
  function calculateCompetency() {
    // å®é™…éœ€è¦è®¡ç®—çš„éƒ¨åˆ†
    const sections = ['basic', 'skills', 'education', 'work'];
    let completed = 0;

    sections.forEach(section => {
      if (userData[section]) {
        if (Array.isArray(userData[section])) {
          if (userData[section].length > 0) completed++;
        } else if (Object.keys(userData[section]).length > 0) {
          completed++;
        }
      }
    });

    const percent = Math.round((completed / sections.length) * 100);

    // æ›´æ–°UIå…ƒç´ 
    document.getElementById('competencyPercent').textContent = percent;
    document.getElementById('progressPercent').textContent = `${percent}%`;
    document.getElementById('competencyProgress').style.width = `${percent}%`;

    // æ›´æ–°å„ä¸ªéƒ¨åˆ†çš„å®ŒæˆçŠ¶æ€
    sections.forEach(section => {
      updateSectionStatus(section, `${section}Status`);
    });
  }

  // å¢å¼ºçŠ¶æ€æ›´æ–°å‡½æ•°
  function updateSectionStatus(section, elementId) {
    const element = document.getElementById(elementId);
    if (!element) return;

    let isCompleted = false;

    if (Array.isArray(userData[section])) {
      isCompleted = userData[section].length > 0;
    } else {
      isCompleted = Object.keys(userData[section] || {}).length > 0;
    }

    if (isCompleted) {
      element.textContent = 'å·²å®Œæˆ';
      element.style.color = '#4CAF50';
    } else {
      element.textContent = section === 'basic' ? 'å¾…å½•å…¥' : 'å¾…å®Œå–„';
      element.style.color = '#f44336';
    }
  }


  // è¡¨å•æ“ä½œ
  function showForm(type) {
    const formMap = {
      basic: 'basicForm',
      skills: 'skillsForm',
      education: 'educationForm',
      work: 'workForm',
      projects: 'projectsForm',
      certificates: 'certificatesForm'
    };
    document.getElementById(formMap[type]).style.display = 'block';
  }

  // å¢å¼ºè¡¨å•ä¿å­˜é€»è¾‘
  async function saveForm(event, type) {
    event.preventDefault();  // é˜»æ­¢é»˜è®¤æäº¤


    const token = localStorage.getItem("token");
    if (!token) {
      alert("è¯·å…ˆç™»å½•ï¼");
      return;
    }

    let payload = {};
    let url = "";

    switch (type) {
      case "basic":
        payload = {
          realName: document.getElementById("realName").value,
          gender: document.querySelector("input[name='gender']:checked")?.value,
          contact: document.getElementById("contact").value,
          bio: document.getElementById("bio").value,
        };
        url = "/api/profile/basic";
        break;

      case "skills":
        payload = {
          skills: document.getElementById("skills").value
            .split(",")
            .map(s => s.trim())
        };
        url = "/api/profile/skills";
        break;

      case "education":
        payload = { education: collectEducationForm() };
        url = "/api/profile/education";
        break;

      case "work":
        payload = { experience: collectExperienceForm() };
        url = "/api/profile/work";
        break;

      case "projects":
        payload = { projects: collectProjectsForm() };
        url = "/api/profile/projects";
        break;

      case "certificates":
        payload = { certificates: collectCertificatesForm() };
        url = "/api/profile/certificates";
        break;
    }

    const res = await fetch(url, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${token}`
      },
      body: JSON.stringify(payload)
    });

    if (!res.ok) {
      const errorText = await res.text(); // å…ˆæ‹¿åŸå§‹è¿”å›
      console.error("è¯·æ±‚å¤±è´¥:", errorText);
      alert("ä¿å­˜å¤±è´¥: " + res.status);
      return;
    }

    const data = await res.json();
    alert(data.msg || "ä¿å­˜æˆåŠŸ");
  }



  function collectEducationForm() {
    return [{
      school: document.getElementById("schoolName").value,
      degree: document.getElementById("degree").value,
      major: document.getElementById("major").value,
      start: document.getElementById("startDate").value,
      end: document.getElementById("endDate").value
    }];
  }

  function collectExperienceForm() {
    return [{
      company: document.getElementById("companyName").value,
      start: document.getElementById("workStartDate").value,
      end: document.getElementById("workEndDate").value,
      description: document.getElementById("workDescription").value
    }];
  }



  // å…³é—­æ‰€æœ‰æ¨¡æ€æ¡†
  function closeModal() {
    // è·å–æ‰€æœ‰è¡¨å•æ¨¡æ€æ¡†
    const modals = document.querySelectorAll('.form-modal');

    // éå†å¹¶éšè—æ‰€æœ‰æ¨¡æ€æ¡†
    modals.forEach(modal => {
      modal.style.display = 'none';
    });

    // å¦‚æœæœ‰é®ç½©å±‚ä¹Ÿä¸€å¹¶éšè—
    const overlay = document.querySelector('.modal-overlay');
    if (overlay) {
      overlay.style.display = 'none';
    }
  }



  // é€‰é¡¹å¡åˆ‡æ¢
  function switchTab(tab) {
    document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('[id$="Tab"]').forEach(t => t.style.display = 'none');

    document.querySelector(`[onclick="switchTab('${tab}')"]`).classList.add('active');
    document.getElementById(`${tab}Tab`).style.display = 'block';
  }

  // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
  function loadUserData() {
    const savedData = localStorage.getItem('userData');
    if (savedData) userData = JSON.parse(savedData);
    calculateCompetency();
  }
  function toggleSidebar() {
    const sidebar = document.querySelector('.sidebar');
    const overlay = document.querySelector('.sidebar-overlay');

    // ä»…åˆ‡æ¢activeçŠ¶æ€
    const isActive = sidebar.classList.toggle('active');

    // åŒæ­¥ç´§å‡‘æ¨¡å¼
    sidebar.classList.toggle('compact', !isActive);

    // é®ç½©å±‚æ§åˆ¶
    overlay.style.display = isActive ? 'block' : 'none';
  }
  // å¢å¼ºç‰ˆç™»å½•çŠ¶æ€æ£€æŸ¥
  async function checkLoginStatus() {
    const token = localStorage.getItem("token");
    const loginPrompt = document.getElementById("loginPrompt");
    const functionContainer = document.getElementById("functionContainer");
    const toolboxContainer = document.getElementById("toolboxContainer");
    const navAuth = document.getElementById("navAuth");
    const userContainer = document.getElementById("userContainer");

    if (!token) {
      // æœªç™»å½•
      userContainer.style.display = "none";
      loginPrompt.style.display = "block";
      functionContainer.style.display = "none";
      toolboxContainer.style.display = "none";
      navAuth.innerHTML = `
        <span style="color:#666" class="welcome-text">ç™»å½•äº†è§£æ›´å¤š</span> |
        <a href="login.html">ç™»å½•/æ³¨å†Œ</a> 
        `;
      return;
    }

    try {
      // è°ƒç”¨åç«¯ /api/auth/me
      const res = await fetch("/api/auth/me", {
        headers: { "Authorization": "Bearer " + token }
      });
      const user = await res.json();

      if (res.ok) {
        // å·²ç™»å½•
        loginPrompt.style.display = "none";
        userContainer.style.display = "block";
        functionContainer.style.display = "block";
        toolboxContainer.style.display = "block";

        // æ˜¾ç¤ºç”¨æˆ·æ•°æ®
        document.getElementById("userNickname").innerText = user.username;

        // æ˜¾ç¤ºå¤´åƒ
        document.getElementById("userAvatar").src = user.avatar || "images/profile/actor.jpg";
        navAuth.innerHTML = `
            <span class="welcome-text" style="color:#666">æ¬¢è¿ï¼Œ${user.username}</span>
            <button onclick="logout()"
            style="background:transparent;
            color:#0073e6;
            border:1px solid #0073e6;
            padding:0.4rem 0.8rem;
            front-size:0.8rem;
            transition:all 0.3s;
                   border-radius:8px;
                   cursor:pointer;
                   margin-right:10px;
                   margin-left:1.5vw;">
                   é€€å‡ºç™»å½•</button>
          `;

        // æ˜¾ç¤ºç»Ÿè®¡æ•°æ®
        // æ‰¾åˆ° stats-grid ä¸‹çš„ä¸‰ä¸ª divï¼Œä¾æ¬¡å¡«å……
        const statsDivs = userContainer.querySelectorAll('.stats-grid div');
        if (statsDivs.length >= 3) {
          statsDivs[0].innerText = `å¸–å­ ${user.postsCount || 0}`;
          statsDivs[1].innerText = `è·èµ ${user.likes || 0}`;
          statsDivs[2].innerText = `å­¦ä¹ æ—¶é•¿ ${user.studyHours || 0}åˆ†`;
        }
      } else {
        logout();
      }
    } catch (err) {
      console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:", err);
      logout();
    }
  }

  function logout() {
    localStorage.removeItem("token");
    localStorage.removeItem("userData");
    localStorage.removeItem("isLoggedIn");
    window.location.href = "login.html";
  }

  // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
  checkLoginStatus();

  // ä¿®æ”¹åçš„ç”¨æˆ·æ•°æ®åŠ è½½
  async function loadUserData() {
    const token = localStorage.getItem("token");
    if (!token) return;

    try {
      const res = await fetch("/api/profile", {
        headers: { Authorization: `Bearer ${token}` }
      });

      if (!res.ok) {
        console.warn("æœªæ‰¾åˆ°ç”¨æˆ·èµ„æ–™");
        return;
      }

      const profile = await res.json();

      // æ›´æ–°åˆ°å‰ç«¯çš„è¡¨å•
      document.getElementById("realName").value = profile.realName || "";
      document.getElementById("skills").value = (profile.skills || []).join(",");
      document.getElementById("contact").value = profile.contact || "";
      document.getElementById("bio").value = profile.bio || "";

      // TODO: å¦‚æœä½ æœ‰å¤šä¸ªæ•™è‚²ç»å†/å·¥ä½œç»å†è¡¨å•ï¼Œå¯ä»¥å¾ªç¯å¡«å……
      // profile.education.forEach(...)
      // profile.experience.forEach(...)
    } catch (err) {
      console.error("åŠ è½½ç”¨æˆ·èµ„æ–™å¤±è´¥:", err);
    }
  }

  async function loadFavoriteJobs() {
    const res = await fetch("/api/favorite/job", {
      headers: {
        "Authorization": "Bearer " + localStorage.getItem("token")
      }
    });
    const data = await res.json();
    const container = document.getElementById("favoriteJobsContainer");
    container.innerHTML = "";
    if (!data.favorites || data.favorites.length === 0) {
      container.innerHTML = "<p>æš‚æ— æ”¶è—å²—ä½</p>";
      return;
    }
    data.favorites.forEach(item => {
      const job = item.target;
      const card = document.createElement("div");
      card.className = "favorite-job-card";
      card.style.border = "1px solid #e0e0e0";
      card.style.boxShadow = "0 2px 8px rgba(0,0,0,0.08)";
      card.style.marginBottom = "20px";
      card.style.padding = "1.5rem";
      card.style.borderRadius = "12px";
      card.innerHTML = `
      <h3 style="margin-bottom:8px;color:#0073e6;">${job.title}</h3>
      <div style="color:#666;margin-bottom:6px;">${job.company || ''} ${job.location ? ' - ' + job.location : ''}</div>
      <div style="color:#0073e6;margin-bottom:6px;">${job.salary ? 'è–ªèµ„ï¼š' + job.salary : ''}</div>
      <div style="font-size:13px;color:#888;margin-bottom:10px;">${job.description || ''}</div>
    `;
      container.appendChild(card);
    });
  }

  // é¡µé¢åŠ è½½æ—¶è°ƒç”¨
  loadFavoriteJobs();


  function handleSearch() {
    const searchTerm = document.getElementById('searchInput').value;
    const encodedTerm = encodeURIComponent(searchTerm);
    window.location.href = `search.html?q=${encodedTerm}`;
  }

  document.getElementById('searchInput')
    .addEventListener('keypress', e => e.key === 'Enter' && handleSearch());

  function openSettings() {
    document.getElementById("settingsModal").style.display = "block";
  }

  function closeSettings() {
    document.getElementById("settingsModal").style.display = "none";
  }

  async function updateProfile() {
    const username = document.getElementById("newUsername").value.trim();
    const fileInput = document.getElementById("avatarFile");
    const token = localStorage.getItem("token");

    if (!token) {
      alert("è¯·å…ˆç™»å½•ï¼");
      return;
    }

    const formData = new FormData();
    if (fileInput.files.length) {
      formData.append("avatar", fileInput.files[0]); // æœ‰æ–‡ä»¶æ‰åŠ 
    }
    if (username) {
      formData.append("username", username); // æœ‰ç”¨æˆ·åæ‰åŠ 
    }

    if (!fileInput.files.length && !username) {
      alert("è¯·è¾“å…¥ç”¨æˆ·åæˆ–é€‰æ‹©å¤´åƒ");
      return;
    }

    try {
      const res = await fetch("/api/profile/upload-avatar", {
        method: "POST",
        headers: {
          Authorization: "Bearer " + token
        },
        body: formData
      });

      const data = await res.json();
      if (res.ok) {
        alert("ä¿®æ”¹æˆåŠŸï¼");
        if (data.user.username) {
          document.getElementById("userNickname").innerText = data.user.username;
        }
        if (data.user.avatar) {
          document.getElementById("userAvatar").src = data.user.avatar;
        }
        closeSettings();
      } else {
        alert("ä¿®æ”¹å¤±è´¥: " + (data.msg || "æœªçŸ¥é”™è¯¯"));
      }
    } catch (err) {
      console.error("è¯·æ±‚å‡ºé”™:", err);
      alert("è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åå†è¯•");
    }
  }

  function toggleToolbox() {
    const functionContainer = document.getElementById("functionContainer");
    const toolboxContainer = document.getElementById("toolboxContainer");

    // åˆ¤æ–­æ˜¯å¦æ˜¯ç§»åŠ¨ç«¯
    if (window.innerWidth <= 768) {
      if (functionContainer.style.display !== "none") {
        functionContainer.style.display = "none";
        toolboxContainer.style.display = "block";
      } else {
        functionContainer.style.display = "block";
        toolboxContainer.style.display = "none";
      }
    }
  }


</script>

</html>